
query allMyWorkspaces {
	signedUser {
		joinedWorkspaces(isActive: true) {
			edges {
				node {
					... WorkspaceFragment
				}
			}
		}
		awaitingToJoinWorkspaces {
			edges {
				node {
					... OnlyWorkspaceFragment
				}
			}
		}
	}
}

mutation leaveWorkspace($workspaceId: String) {
	leaveWorkspace(workspaceId: $workspaceId)
}

fragment WorkspaceFragment on WorkspaceNode {
	id
	name
	code
	createdAt
	isRequiredToAcceptToJoin
	isRequiredUserEmailToJoin
	isRequiredUserPhoneNumberToJoin
	members {
		totalCount
		edges {
			node {
				id
				role
			}
		}
	}
}

fragment OnlyWorkspaceFragment on OnlyWorkspaceNode {
	id
	name
	code
	createdAt
	isRequiredToAcceptToJoin
	isRequiredUserEmailToJoin
	isRequiredUserPhoneNumberToJoin
	totalMemberCount
}
